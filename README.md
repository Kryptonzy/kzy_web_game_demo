# Somnium Weavers: Endless Echoes - Web Game Demo

This project is a web-based demonstration of the core gameplay loop for "Somnium Weavers: Endless Echoes," a dream exploration game.

## Core Features (Demo)

*   **Waking World Hub:** Displays character name, collected Dream Fragments, and options to start a new dream or manage memories.
*   **AI-Powered Dream Sequences:** Enter dreams where the narrative, player choices, and outcomes are dynamically generated by an AI (simulated via Google Gemini API calls).
*   **Dream Fragments:** Collect fragments from dreams that are added to your inventory.
*   **Image Generation (Placeholder):** Dreams can generate prompts for images, though the actual image generation is currently a placeholder.
*   **State Persistence:** Collected Dream Fragments are saved in the browser's `localStorage`.
*   **"Clear Memory":** Option to clear all collected fragments.
*   **"Remember Memory":** Option to download a Markdown summary of the completed dream.
*   **Zero-Dependency Backend:** The backend is built with Node.js using only built-in modules (`http`, `https`), making direct REST API calls to AI services. No external npm packages are strictly required for the backend server to run (though an API key is essential).

## Setup and Running

### 1. API Key Configuration (Essential for AI Features)

The AI-powered dream generation relies on a Google AI API key (e.g., for the Gemini API).

1.  **Locate `.env_example`:** In the root directory of the project, you'll find a file named `.env_example`. It contains:
    ```
    API_KEY="YOUR_GOOGLE_AI_API_KEY_HERE"
    ```

2.  **Create your `.env` file:** Make a copy of `.env_example` and name it `.env`. You can do this in your terminal:
    ```bash
    cp .env_example .env
    ```

3.  **Edit the `.env` file:** Open the newly created `.env` file with a text editor.

4.  **Set Your API Key:** Replace the placeholder text `"YOUR_GOOGLE_AI_API_KEY_HERE"` with your actual Google AI API key. The line should look similar to this (replace the `x`s with your key):
    ```
    API_KEY="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    ```

5.  **Save the `.env` file.**

**Important Notes on the API Key:**
*   The `server.js` file loads the `API_KEY` from this `.env` file (or an environment variable if set globally).
*   If the `API_KEY` is not set or is invalid, the AI-driven dream generation and image generation features will **not work**.
*   The server will print a warning to the console on startup if the `API_KEY` is missing.
*   The `.gitignore` file is configured to prevent the `.env` file (which contains your secret API key) from being accidentally committed to version control.

### 2. Running the Application

1.  **Start the Backend Server:**
    *   Open your terminal in the root directory of the project.
    *   Run the command: `node server.js`
    *   The server should start, typically on port 3000. Check the console output for messages, including whether the API_KEY was loaded.

2.  **Open the Frontend:**
    *   Open the `index.html` file in your web browser.
    *   The game should now be able to communicate with the local backend server.

**(Note:** This project does not require `npm install` for its core backend functionality as it uses Node.js built-in modules. The frontend is vanilla JavaScript, HTML, and CSS.)

## Project Structure

*   `index.html`: Main HTML file for the game interface.
*   `style.css`: CSS styles for the game.
*   `app.js`: Frontend JavaScript logic for UI, game state, and communication with the backend.
*   `server.js`: Backend Node.js server using the built-in `http` module.
*   `ai_service_http.js`: Handles making direct REST API calls to Google AI services.
*   `constants_http.js`: Contains constants for the backend, like the system prompt for the AI.
*   `package.json`: Project metadata (no installable dependencies for the server).
*   `.env_example`: Template for API key configuration.
*   `.gitignore`: Specifies intentionally untracked files.